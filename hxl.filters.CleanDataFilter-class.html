<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>hxl.filters.CleanDataFilter</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="hxl-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="hxl-module.html">Package&nbsp;hxl</a> ::
        <a href="hxl.filters-module.html">Module&nbsp;filters</a> ::
        Class&nbsp;CleanDataFilter
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class CleanDataFilter</h1><p class="nomargin-top"><span class="codelink"><a href="hxl.filters-pysrc.html#CleanDataFilter">source&nbsp;code</a></span></p>
<pre class="base-tree">
     object --+            
              |            
  <a href="hxl.model.Dataset-class.html">model.Dataset</a> --+        
                  |        
 <a href="hxl.filters.AbstractBaseFilter-class.html">AbstractBaseFilter</a> --+    
                      |    
<a href="hxl.filters.AbstractStreamingFilter-class.html">AbstractStreamingFilter</a> --+
                          |
                         <strong class="uidshort">CleanDataFilter</strong>
</pre>

<hr />
<p>Data-cleaning filter.</p>
  <p>This filter can perform a set of automated cleaning tasks, including 
  character-case conversion, whitespace normalisation, and date and number 
  normalisation. It supports the <a 
  href="hxl.model.Dataset-class.html#clean_data" 
  class="link">hxl.model.Dataset.clean_data</a> method and the <a 
  href="hxl.scripts-module.html#hxlclean" 
  class="link">hxl.scripts.hxlclean</a> command-line script.</p>
  <p>The clean filter is especially useful when you are working with data 
  from different sources who might use different date and number 
  conventions, and also for datasets with inconsistent whitespace and 
  capitalisation. The following functions are available (and can be 
  filtered by row and column):</p>
  <ul>
    <li>
      <b>whitespace</b>: strip leading/trailing spaces, and normalise all 
      internal whitespace (including lineends) to a single space.
    </li>
    <li>
      <b>upper</b>: convert text to all uppercase.
    </li>
    <li>
      <b>lower</b>: convert text to all lowercase.
    </li>
    <li>
      <b>date</b>: attempt to parse and normalise dates to ISO 8601 format 
      (YYYY-MM-DD). This will not always succeed -- for example, it is 
      impossible to guess whether &quot;9/6/15&quot; refers to 6 September 
      2016 or 9 June 2016 (hence the need for ISO dates) -- but it will do 
      its best.
    </li>
    <li>
      <b>number</b>: attempt to normalise numbers to standard computer 
      format (remove commas or spaces between thousands, and use 
      &quot;.&quot; as the decimal separator).
    </li>
  </ul>
  <p>For each type of cleaning, you specify one or more <a 
  href="hxl.model.TagPattern-class.html" class="link">tag patterns</a> to 
  which the cleaning applies (you may use string representations instead of
  creating the objects), or use <code>True</code> to apply the cleaning to 
  the whole row. You may also include <a 
  href="hxl.model.RowQuery-class.html" class="link">hxl.model.RowQuery</a> 
  objects to apply the cleaning tasks only to specific rows.</p>
  <p>This example normalises all start dates from Oxfam:</p>
<pre class="literalblock">
 filter = CleanFilter(hxl.data('data.csv'), dates='date+start', queries='org=Oxfam')

 # or

 filter = hxl.data('data.csv').clean_data(dates='date+start', queries='org=Oxfam')
</pre>

<hr />
<div class="fields">      <p><strong>See Also:</strong>
        <a href="hxl.filters.ReplaceDataFilter-class.html" 
        class="link">ReplaceDataFilter</a>, which allows for more-specific 
        replacements using string and regular-expression patterns.
      </p>
</div><!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Instance Methods</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="hxl.filters.CleanDataFilter-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">source</span>,
        <span class="summary-sig-arg">whitespace</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">upper</span>=<span class="summary-sig-default">[]</span>,
        <span class="summary-sig-arg">lower</span>=<span class="summary-sig-default">[]</span>,
        <span class="summary-sig-arg">date</span>=<span class="summary-sig-default">[]</span>,
        <span class="summary-sig-arg">date_format</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">number</span>=<span class="summary-sig-default">[]</span>,
        <span class="summary-sig-arg">number_format</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">queries</span>=<span class="summary-sig-default">[]</span>)</span><br />
      Construct a new data-cleaning filter.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="hxl.filters-pysrc.html#CleanDataFilter.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="hxl.filters.CleanDataFilter-class.html#filter_row" class="summary-sig-name">filter_row</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">row</span>)</span><br />
      Internal: clean up values and pass on the row data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="hxl.filters-pysrc.html#CleanDataFilter.filter_row">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="hxl.filters.AbstractStreamingFilter-class.html">AbstractStreamingFilter</a></code></b>:
      <code><a href="hxl.filters.AbstractStreamingFilter-class.html#__iter__">__iter__</a></code>
      </p>
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="hxl.filters.AbstractBaseFilter-class.html">AbstractBaseFilter</a></code></b>:
      <code><a href="hxl.filters.AbstractBaseFilter-class.html#columns">columns</a></code>,
      <code><a href="hxl.filters.AbstractBaseFilter-class.html#filter_columns">filter_columns</a></code>
      </p>
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="hxl.model.Dataset-class.html">model.Dataset</a></code></b>:
      <code><a href="hxl.model.Dataset-class.html#add_columns">add_columns</a></code>,
      <code><a href="hxl.model.Dataset-class.html#append">append</a></code>,
      <code><a href="hxl.model.Dataset-class.html#cache">cache</a></code>,
      <code><a href="hxl.model.Dataset-class.html#clean_data">clean_data</a></code>,
      <code><a href="hxl.model.Dataset-class.html#count">count</a></code>,
      <code><a href="hxl.model.Dataset-class.html#dedup">dedup</a></code>,
      <code><a href="hxl.model.Dataset-class.html#display_tags">display_tags</a></code>,
      <code><a href="hxl.model.Dataset-class.html#explode">explode</a></code>,
      <code><a href="hxl.model.Dataset-class.html#fill_data">fill_data</a></code>,
      <code><a href="hxl.model.Dataset-class.html#gen_csv">gen_csv</a></code>,
      <code><a href="hxl.model.Dataset-class.html#gen_json">gen_json</a></code>,
      <code><a href="hxl.model.Dataset-class.html#gen_raw">gen_raw</a></code>,
      <code><a href="hxl.model.Dataset-class.html#get_value_set">get_value_set</a></code>,
      <code><a href="hxl.model.Dataset-class.html#has_headers">has_headers</a></code>,
      <code><a href="hxl.model.Dataset-class.html#headers">headers</a></code>,
      <code><a href="hxl.model.Dataset-class.html#merge_data">merge_data</a></code>,
      <code><a href="hxl.model.Dataset-class.html#recipe">recipe</a></code>,
      <code><a href="hxl.model.Dataset-class.html#rename_columns">rename_columns</a></code>,
      <code><a href="hxl.model.Dataset-class.html#replace_data">replace_data</a></code>,
      <code><a href="hxl.model.Dataset-class.html#replace_data_map">replace_data_map</a></code>,
      <code><a href="hxl.model.Dataset-class.html#row_counter">row_counter</a></code>,
      <code><a href="hxl.model.Dataset-class.html#sort">sort</a></code>,
      <code><a href="hxl.model.Dataset-class.html#tags">tags</a></code>,
      <code><a href="hxl.model.Dataset-class.html#validate">validate</a></code>,
      <code><a href="hxl.model.Dataset-class.html#values">values</a></code>,
      <code><a href="hxl.model.Dataset-class.html#with_columns">with_columns</a></code>,
      <code><a href="hxl.model.Dataset-class.html#with_rows">with_rows</a></code>,
      <code><a href="hxl.model.Dataset-class.html#without_columns">without_columns</a></code>,
      <code><a href="hxl.model.Dataset-class.html#without_rows">without_rows</a></code>
      </p>
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Class Variables</span></td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="hxl.filters.AbstractStreamingFilter-class.html">AbstractStreamingFilter</a></code></b>:
      <code><a href="hxl.filters.AbstractStreamingFilter-class.html#__metaclass__">__metaclass__</a></code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== INSTANCE VARIABLES ==================== -->
<a name="section-InstanceVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Instance Variables</span></td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="hxl.filters.AbstractBaseFilter-class.html">AbstractBaseFilter</a></code></b>:
      <code><a href="hxl.filters.AbstractBaseFilter-class.html#source">source</a></code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Properties</span></td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Method Details</span></td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">source</span>,
        <span class="sig-arg">whitespace</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">upper</span>=<span class="sig-default">[]</span>,
        <span class="sig-arg">lower</span>=<span class="sig-default">[]</span>,
        <span class="sig-arg">date</span>=<span class="sig-default">[]</span>,
        <span class="sig-arg">date_format</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">number</span>=<span class="sig-default">[]</span>,
        <span class="sig-arg">number_format</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">queries</span>=<span class="sig-default">[]</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="hxl.filters-pysrc.html#CleanDataFilter.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Construct a new data-cleaning filter.</p>
  <p>The <i>upper</i>, <i>lower</i>, <i>date</i>, and <i>number</i> 
  arguments all accept either lists of tag patterns&lt;hxl.model.TagPattern
  or individual patterns, which can be strings (like 
  <code>#org+impl-code</code>) or full <a 
  href="hxl.model.TagPattern-class.html" 
  class="link">hxl.model.TagPattern</a> objects. The <i>queries</i> 
  argument accepts either lists of queries or individual queries, which can
  be strings (like <code>org=Oxfam</code>) or full <a 
  href="hxl.model.RowQuery-class.html" class="link">hxl.model.RowQuery</a> 
  objects.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>source</code></strong> - a <a href="hxl.model.Dataset-class.html" 
          class="link">hxl.model.Dataset</a> object to filter</li>
        <li><strong class="pname"><code>whitespace</code></strong> - a tag pattern or list of tag patterns for whitespace 
          normalisation</li>
        <li><strong class="pname"><code>upper</code></strong> - a tag pattern or list of tag patterns for conversion to uppercase</li>
        <li><strong class="pname"><code>lower</code></strong> - a tag pattern or list of tag patterns for conversion to lowercase</li>
        <li><strong class="pname"><code>date</code></strong> - a tag pattern or list of tag patterns for date normalisation</li>
        <li><strong class="pname"><code>date_format</code></strong> - a date-format string for output, as used by strftime</li>
        <li><strong class="pname"><code>number</code></strong> - a tag pattern or list of tag patterns for number normalisation</li>
        <li><strong class="pname"><code>number_format</code></strong> - a number-format string for output, as used by format.</li>
        <li><strong class="pname"><code>queries</code></strong> - optional list of queries to select rows to be cleaned.</li>
    </ul></dd>
    <dt>Overrides:
        object.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="filter_row"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">filter_row</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">row</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="hxl.filters-pysrc.html#CleanDataFilter.filter_row">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Internal: clean up values and pass on the row data.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>row</code></strong> - the original <a href="hxl.model.Row-class.html" 
          class="link">hxl.model.Row</a> object.</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>A list of string values (<i>not</i> a Row object) or 
          <code>None</code> to skip the row.</dd>
    <dt>Overrides:
        <a href="hxl.filters.AbstractStreamingFilter-class.html#filter_row">AbstractStreamingFilter.filter_row</a>
    </dt>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="hxl-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    on Tue Jan 30 16:06:55 2018
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
